/* THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
If you want to view the source, please visit the GitHub repository of this plugin. */

"use strict";var H=Object.defineProperty;var ye=Object.getOwnPropertyDescriptor;var Se=Object.getOwnPropertyNames;var Me=Object.prototype.hasOwnProperty;var xe=(u,n)=>()=>(n||u((n={exports:{}}).exports,n),n.exports),we=(u,n)=>{for(var o in n)H(u,o,{get:n[o],enumerable:!0})},Ae=(u,n,o,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of Se(n))!Me.call(u,r)&&r!==o&&H(u,r,{get:()=>n[r],enumerable:!(s=ye(n,r))||s.enumerable});return u};var _e=u=>Ae(H({},"__esModule",{value:!0}),u);var K=xe((O,L)=>{(function(u,n){typeof O=="object"&&typeof L<"u"?L.exports=n():typeof define=="function"&&define.amd?define(n):(u=typeof globalThis<"u"?globalThis:u||self,u.tinycolor=n())})(O,function(){"use strict";function u(e){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},u(e)}var n=/^\s+/,o=/\s+$/;function s(e,i){if(e=e||"",i=i||{},e instanceof s)return e;if(!(this instanceof s))return new s(e,i);var t=r(e);this._originalInput=e,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=i.format||t.format,this._gradientType=i.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var i=this.toRgb();return(i.r*299+i.g*587+i.b*114)/1e3},getLuminance:function(){var i=this.toRgb(),t,a,h,l,g,c;return t=i.r/255,a=i.g/255,h=i.b/255,t<=.03928?l=t/12.92:l=Math.pow((t+.055)/1.055,2.4),a<=.03928?g=a/12.92:g=Math.pow((a+.055)/1.055,2.4),h<=.03928?c=h/12.92:c=Math.pow((h+.055)/1.055,2.4),.2126*l+.7152*g+.0722*c},setAlpha:function(i){return this._a=q(i),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var i=b(this._r,this._g,this._b);return{h:i.h*360,s:i.s,v:i.v,a:this._a}},toHsvString:function(){var i=b(this._r,this._g,this._b),t=Math.round(i.h*360),a=Math.round(i.s*100),h=Math.round(i.v*100);return this._a==1?"hsv("+t+", "+a+"%, "+h+"%)":"hsva("+t+", "+a+"%, "+h+"%, "+this._roundA+")"},toHsl:function(){var i=f(this._r,this._g,this._b);return{h:i.h*360,s:i.s,l:i.l,a:this._a}},toHslString:function(){var i=f(this._r,this._g,this._b),t=Math.round(i.h*360),a=Math.round(i.s*100),h=Math.round(i.l*100);return this._a==1?"hsl("+t+", "+a+"%, "+h+"%)":"hsla("+t+", "+a+"%, "+h+"%, "+this._roundA+")"},toHex:function(i){return D(this._r,this._g,this._b,i)},toHexString:function(i){return"#"+this.toHex(i)},toHex8:function(i){return te(this._r,this._g,this._b,this._a,i)},toHex8String:function(i){return"#"+this.toHex8(i)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(p(this._r,255)*100)+"%",g:Math.round(p(this._g,255)*100)+"%",b:Math.round(p(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(p(this._r,255)*100)+"%, "+Math.round(p(this._g,255)*100)+"%, "+Math.round(p(this._b,255)*100)+"%)":"rgba("+Math.round(p(this._r,255)*100)+"%, "+Math.round(p(this._g,255)*100)+"%, "+Math.round(p(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:fe[D(this._r,this._g,this._b,!0)]||!1},toFilter:function(i){var t="#"+B(this._r,this._g,this._b,this._a),a=t,h=this._gradientType?"GradientType = 1, ":"";if(i){var l=s(i);a="#"+B(l._r,l._g,l._b,l._a)}return"progid:DXImageTransform.Microsoft.gradient("+h+"startColorstr="+t+",endColorstr="+a+")"},toString:function(i){var t=!!i;i=i||this._format;var a=!1,h=this._a<1&&this._a>=0,l=!t&&h&&(i==="hex"||i==="hex6"||i==="hex3"||i==="hex4"||i==="hex8"||i==="name");return l?i==="name"&&this._a===0?this.toName():this.toRgbString():(i==="rgb"&&(a=this.toRgbString()),i==="prgb"&&(a=this.toPercentageRgbString()),(i==="hex"||i==="hex6")&&(a=this.toHexString()),i==="hex3"&&(a=this.toHexString(!0)),i==="hex4"&&(a=this.toHex8String(!0)),i==="hex8"&&(a=this.toHex8String()),i==="name"&&(a=this.toName()),i==="hsl"&&(a=this.toHslString()),i==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(i,t){var a=i.apply(null,[this].concat([].slice.call(t)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(ae,arguments)},brighten:function(){return this._applyModification(re,arguments)},darken:function(){return this._applyModification(oe,arguments)},desaturate:function(){return this._applyModification(ie,arguments)},saturate:function(){return this._applyModification(ne,arguments)},greyscale:function(){return this._applyModification(se,arguments)},spin:function(){return this._applyModification(le,arguments)},_applyCombination:function(i,t){return i.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(ue,arguments)},complement:function(){return this._applyCombination(he,arguments)},monochromatic:function(){return this._applyCombination(ge,arguments)},splitcomplement:function(){return this._applyCombination(de,arguments)},triad:function(){return this._applyCombination(U,[3])},tetrad:function(){return this._applyCombination(U,[4])}},s.fromRatio=function(e,i){if(u(e)=="object"){var t={};for(var a in e)e.hasOwnProperty(a)&&(a==="a"?t[a]=e[a]:t[a]=E(e[a]));e=t}return s(e,i)};function r(e){var i={r:0,g:0,b:0},t=1,a=null,h=null,l=null,g=!1,c=!1;return typeof e=="string"&&(e=be(e)),u(e)=="object"&&(C(e.r)&&C(e.g)&&C(e.b)?(i=d(e.r,e.g,e.b),g=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):C(e.h)&&C(e.s)&&C(e.v)?(a=E(e.s),h=E(e.v),i=M(e.h,a,h),g=!0,c="hsv"):C(e.h)&&C(e.s)&&C(e.l)&&(a=E(e.s),l=E(e.l),i=y(e.h,a,l),g=!0,c="hsl"),e.hasOwnProperty("a")&&(t=e.a)),t=q(t),{ok:g,format:e.format||c,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:t}}function d(e,i,t){return{r:p(e,255)*255,g:p(i,255)*255,b:p(t,255)*255}}function f(e,i,t){e=p(e,255),i=p(i,255),t=p(t,255);var a=Math.max(e,i,t),h=Math.min(e,i,t),l,g,c=(a+h)/2;if(a==h)l=g=0;else{var m=a-h;switch(g=c>.5?m/(2-a-h):m/(a+h),a){case e:l=(i-t)/m+(i<t?6:0);break;case i:l=(t-e)/m+2;break;case t:l=(e-i)/m+4;break}l/=6}return{h:l,s:g,l:c}}function y(e,i,t){var a,h,l;e=p(e,360),i=p(i,100),t=p(t,100);function g(S,R,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?S+(R-S)*6*A:A<1/2?R:A<2/3?S+(R-S)*(2/3-A)*6:S}if(i===0)a=h=l=t;else{var c=t<.5?t*(1+i):t+i-t*i,m=2*t-c;a=g(m,c,e+1/3),h=g(m,c,e),l=g(m,c,e-1/3)}return{r:a*255,g:h*255,b:l*255}}function b(e,i,t){e=p(e,255),i=p(i,255),t=p(t,255);var a=Math.max(e,i,t),h=Math.min(e,i,t),l,g,c=a,m=a-h;if(g=a===0?0:m/a,a==h)l=0;else{switch(a){case e:l=(i-t)/m+(i<t?6:0);break;case i:l=(t-e)/m+2;break;case t:l=(e-i)/m+4;break}l/=6}return{h:l,s:g,v:c}}function M(e,i,t){e=p(e,360)*6,i=p(i,100),t=p(t,100);var a=Math.floor(e),h=e-a,l=t*(1-i),g=t*(1-h*i),c=t*(1-(1-h)*i),m=a%6,S=[t,g,l,l,c,t][m],R=[c,t,t,g,l,l][m],A=[l,l,c,t,t,g][m];return{r:S*255,g:R*255,b:A*255}}function D(e,i,t,a){var h=[x(Math.round(e).toString(16)),x(Math.round(i).toString(16)),x(Math.round(t).toString(16))];return a&&h[0].charAt(0)==h[0].charAt(1)&&h[1].charAt(0)==h[1].charAt(1)&&h[2].charAt(0)==h[2].charAt(1)?h[0].charAt(0)+h[1].charAt(0)+h[2].charAt(0):h.join("")}function te(e,i,t,a,h){var l=[x(Math.round(e).toString(16)),x(Math.round(i).toString(16)),x(Math.round(t).toString(16)),x(z(a))];return h&&l[0].charAt(0)==l[0].charAt(1)&&l[1].charAt(0)==l[1].charAt(1)&&l[2].charAt(0)==l[2].charAt(1)&&l[3].charAt(0)==l[3].charAt(1)?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}function B(e,i,t,a){var h=[x(z(a)),x(Math.round(e).toString(16)),x(Math.round(i).toString(16)),x(Math.round(t).toString(16))];return h.join("")}s.equals=function(e,i){return!e||!i?!1:s(e).toRgbString()==s(i).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function ie(e,i){i=i===0?0:i||10;var t=s(e).toHsl();return t.s-=i/100,t.s=k(t.s),s(t)}function ne(e,i){i=i===0?0:i||10;var t=s(e).toHsl();return t.s+=i/100,t.s=k(t.s),s(t)}function se(e){return s(e).desaturate(100)}function ae(e,i){i=i===0?0:i||10;var t=s(e).toHsl();return t.l+=i/100,t.l=k(t.l),s(t)}function re(e,i){i=i===0?0:i||10;var t=s(e).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(i/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(i/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(i/100)))),s(t)}function oe(e,i){i=i===0?0:i||10;var t=s(e).toHsl();return t.l-=i/100,t.l=k(t.l),s(t)}function le(e,i){var t=s(e).toHsl(),a=(t.h+i)%360;return t.h=a<0?360+a:a,s(t)}function he(e){var i=s(e).toHsl();return i.h=(i.h+180)%360,s(i)}function U(e,i){if(isNaN(i)||i<=0)throw new Error("Argument to polyad must be a positive number");for(var t=s(e).toHsl(),a=[s(e)],h=360/i,l=1;l<i;l++)a.push(s({h:(t.h+l*h)%360,s:t.s,l:t.l}));return a}function de(e){var i=s(e).toHsl(),t=i.h;return[s(e),s({h:(t+72)%360,s:i.s,l:i.l}),s({h:(t+216)%360,s:i.s,l:i.l})]}function ue(e,i,t){i=i||6,t=t||30;var a=s(e).toHsl(),h=360/t,l=[s(e)];for(a.h=(a.h-(h*i>>1)+720)%360;--i;)a.h=(a.h+h)%360,l.push(s(a));return l}function ge(e,i){i=i||6;for(var t=s(e).toHsv(),a=t.h,h=t.s,l=t.v,g=[],c=1/i;i--;)g.push(s({h:a,s:h,v:l})),l=(l+c)%1;return g}s.mix=function(e,i,t){t=t===0?0:t||50;var a=s(e).toRgb(),h=s(i).toRgb(),l=t/100,g={r:(h.r-a.r)*l+a.r,g:(h.g-a.g)*l+a.g,b:(h.b-a.b)*l+a.b,a:(h.a-a.a)*l+a.a};return s(g)},s.readability=function(e,i){var t=s(e),a=s(i);return(Math.max(t.getLuminance(),a.getLuminance())+.05)/(Math.min(t.getLuminance(),a.getLuminance())+.05)},s.isReadable=function(e,i,t){var a=s.readability(e,i),h,l;switch(l=!1,h=ve(t),h.level+h.size){case"AAsmall":case"AAAlarge":l=a>=4.5;break;case"AAlarge":l=a>=3;break;case"AAAsmall":l=a>=7;break}return l},s.mostReadable=function(e,i,t){var a=null,h=0,l,g,c,m;t=t||{},g=t.includeFallbackColors,c=t.level,m=t.size;for(var S=0;S<i.length;S++)l=s.readability(e,i[S]),l>h&&(h=l,a=s(i[S]));return s.isReadable(e,a,{level:c,size:m})||!g?a:(t.includeFallbackColors=!1,s.mostReadable(e,["#fff","#000"],t))};var F=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},fe=s.hexNames=ce(F);function ce(e){var i={};for(var t in e)e.hasOwnProperty(t)&&(i[e[t]]=t);return i}function q(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function p(e,i){pe(e)&&(e="100%");var t=me(e);return e=Math.min(i,Math.max(0,parseFloat(e))),t&&(e=parseInt(e*i,10)/100),Math.abs(e-i)<1e-6?1:e%i/parseFloat(i)}function k(e){return Math.min(1,Math.max(0,e))}function v(e){return parseInt(e,16)}function pe(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function me(e){return typeof e=="string"&&e.indexOf("%")!=-1}function x(e){return e.length==1?"0"+e:""+e}function E(e){return e<=1&&(e=e*100+"%"),e}function z(e){return Math.round(parseFloat(e)*255).toString(16)}function j(e){return v(e)/255}var w=function(){var e="[-\\+]?\\d+%?",i="[-\\+]?\\d*\\.\\d+%?",t="(?:"+i+")|(?:"+e+")",a="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",h="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+h),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+h),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+h),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function C(e){return!!w.CSS_UNIT.exec(e)}function be(e){e=e.replace(n,"").replace(o,"").toLowerCase();var i=!1;if(F[e])e=F[e],i=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=w.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=w.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=w.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=w.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=w.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=w.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=w.hex8.exec(e))?{r:v(t[1]),g:v(t[2]),b:v(t[3]),a:j(t[4]),format:i?"name":"hex8"}:(t=w.hex6.exec(e))?{r:v(t[1]),g:v(t[2]),b:v(t[3]),format:i?"name":"hex"}:(t=w.hex4.exec(e))?{r:v(t[1]+""+t[1]),g:v(t[2]+""+t[2]),b:v(t[3]+""+t[3]),a:j(t[4]+""+t[4]),format:i?"name":"hex8"}:(t=w.hex3.exec(e))?{r:v(t[1]+""+t[1]),g:v(t[2]+""+t[2]),b:v(t[3]+""+t[3]),format:i?"name":"hex"}:!1}function ve(e){var i,t;return e=e||{level:"AA",size:"small"},i=(e.level||"AA").toUpperCase(),t=(e.size||"small").toLowerCase(),i!=="AA"&&i!=="AAA"&&(i="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:i,size:t}}return s})});var Ie={};we(Ie,{default:()=>P});module.exports=_e(Ie);var T=require("obsidian");var _=require("obsidian"),G={pluginFilterRegexes:["hot-reload","obsidian-divide-and-conquer"],snippetFilterRegexes:[],filterUsingDisplayName:!0,filterUsingAuthor:!1,filterUsingDescription:!1,initializeAfterPluginChanges:!1,reloadAfterPluginChanges:!1,disabledStates:void 0,snapshots:void 0},I=class extends _.PluginSettingTab{plugin;toggles=[];constructor(n,o){super(n,o),this.plugin=o}display(){let{containerEl:n}=this;n.empty(),n.createEl("h1",{text:"Divide and Conquer"}),n.createEl("h5",{text:"Note: Reinitializing or Reloading may cause disabled plugins to dissappear; close and open the menu to see them again"}).style.color=getComputedStyle(n).getPropertyValue("--interactive-accent"),new _.Setting(n).setName("Reinitialize Obsidian after plugin changes").setDesc(`This is not usually necessary. If you have "Debug startup time" enabled in the Community Plugins tab you'll see startup times when using commmands`).addToggle(r=>r.setValue(this.plugin.settings.initializeAfterPluginChanges).onChange(async d=>{this.plugin.settings.initializeAfterPluginChanges=d,await this.plugin.saveData(!1)})),new _.Setting(n).setName("Reload Obsidian after plugin changes").addToggle(r=>r.setValue(this.plugin.settings.reloadAfterPluginChanges).onChange(async d=>{this.plugin.settings.reloadAfterPluginChanges=d,await this.plugin.saveData(!1)})),n.createEl("hr").createEl("br"),n.createEl("h3",{text:"Changing any of the following settings will restore plugins to the original state."}),new _.Setting(n).setName("Use Filters on Plugin Display Names").setDesc("If this is off, DAC will only match plugins by their ID").addToggle(r=>(this.toggles.push(r),r.setValue(this.plugin.settings.filterUsingDisplayName).onChange(async d=>{this.plugin.settings.filterUsingDisplayName=d,await this.plugin.saveData()}))),new _.Setting(n).setName("Use Filters on Plugin Authors").addToggle(r=>(this.toggles.push(r),r.setValue(this.plugin.settings.filterUsingAuthor).onChange(async d=>{this.plugin.settings.filterUsingAuthor=d,await this.plugin.saveData()}))),new _.Setting(n).setName("Use Filters on Plugin Descriptions").addToggle(r=>(this.toggles.push(r),r.setValue(this.plugin.settings.filterUsingDescription).onChange(async d=>{this.plugin.settings.filterUsingDescription=d,await this.plugin.saveData()})));let o=new _.Setting(n).setName("Plugin Exclusions").setDesc(`Exclude plugins using regex (case insensitive).
Each new line is a new regex. Plugin ids are used for matching by default. Included plugins are on the left, excluded on the right. `);this.addTextArea({mode:"plugins",container:o,placeholder:`^daily/
\\.png$
etc...`,value:this.plugin.settings.pluginFilterRegexes.join(`
`),disabledArea:this.addTextArea({mode:"plugins",container:o})});let s=new _.Setting(n).setName("Snippet Exclusions").setDesc(`Exclude snippets using regex (case insensitive).
Each new line is a new regex. Snippet are only exclude by their name.`);this.addTextArea({mode:"snippets",container:s,placeholder:`^daily/
\\.png$
etc...`,value:this.plugin.settings.snippetFilterRegexes.join(`
`),disabledArea:this.addTextArea({mode:"snippets",container:s})}),[o,s].forEach(r=>{r.controlEl.style.width="100%",r.infoEl.style.width="45%"})}addTextArea({mode:n,container:o,placeholder:s,value:r,disabledArea:d}){let f,y=(b,M)=>{this.plugin.saveData(),b.setPlaceholder([...this.plugin.getIncludedItems(M)].map(D=>D.name).join(`
`)).setDisabled(!0)};return o.addTextArea(b=>{f=b,b.inputEl.setAttr("rows",10),b.inputEl.style.width="100%",r&&b.setPlaceholder(s).setValue(r),b.setPlaceholder(s??[...this.plugin.getIncludedItems(n)].map(M=>M.name).join(`
`)).setDisabled(!d),d&&(this.toggles.forEach(M=>M.toggleEl.onClickEvent(y.bind(this,d,n))),b.inputEl.onblur=M=>{this.setFilters(n,M.target.value),y(d,n)})}),f}setFilters(n,o){let s=o?.split(`
`).filter(r=>r.length);switch(n){case"plugins":this.plugin.settings.pluginFilterRegexes=s;break;case"snippets":this.plugin.settings.snippetFilterRegexes=s;break}this.plugin.saveData()}};function V(u){let n=/calc\((\d+)%\s*([+-])\s*(\d+)%\)/,o=u.match(n);if(!o)return u;let[s,r,d,f]=o,y=d==="+"?+r+ +f:+r-+f;return u.replace(n,`${y}%`)}function $(){let u=document.querySelectorAll(".notice");for(let n=0;n<u.length;n++){let o=u[n];o?.innerText.includes("plugin setup")&&o.remove()}}function J(u,n,o){return Array.from(u.querySelectorAll(n)).find(s=>s.innerText.includes(o))}var W=(u,...n)=>(...o)=>n.reduce((s,r)=>s.then(r.bind(u)),Promise.resolve());function Y(u){let n=[];for(let o=0;o<u.length;o++)n.push(u[o]);return n}function X(u){let n=u.containerEl.querySelectorAll(".setting-item-heading"),o=n[n.length-1],s=Array.from(u.containerEl.children).filter(r=>!(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING));return console.log(s,n),s}var N=["plugins","snippets"];function Z(u,n){let o=Object.keys(n).map(s=>Ce(u,s,n[s]));return o.length===1?o[0]:function(){o.forEach(s=>s())}}function Ce(u,n,o){let s=u[n],r=u.hasOwnProperty(n),d=r?s:function(){return Object.getPrototypeOf(u)[n].apply(this,arguments)},f=o(d);return s&&Object.setPrototypeOf(f,s),Object.setPrototypeOf(y,f),u[n]=y,b;function y(...M){return f===d&&u[n]===y&&b(),f.apply(this,M)}function b(){u[n]===y&&(r?u[n]=d:delete u[n]),f!==d&&(f=d,Object.setPrototypeOf(y,s||Function))}}var Q=K(),ee=200,Te=1e3,Ee=[{id:"reset",name:"Plugin Reset - forget the original state and set the current state as the new original state"},{id:"restore",name:"Plugin Restore - return to the original state"},{id:"unBisect",name:"Plugin Un-Bisect - Undo the last bisection, or enable all plugins if in the original state"},{id:"bisect",name:"Plugin Bisect - Disable half of the active plugins, or return to the original state if all plugins are active"},{id:"reBisect",name:"Plugin Re-Bisect - Undo the last bisection, then disable the other half"}],Re=[{id:"reset",name:"Snippet Reset - forget the original state and set the current state as the new original state"},{id:"restore",name:"Snippet Restore - return to the original state"},{id:"unBisect",name:"Snippet Un-Bisect - Undo the last bisection, or enable all snippets if in the original state"},{id:"bisect",name:"Snippet Bisect - Disable half of the active snippets, or return to the original state if all snippets are active"},{id:"reBisect",name:"Snippet Re-Bisect - Undo the last bisection, then disable the other half"}],De=[{id:"reset",tooltip:"Reset - Snapshot the current state"},{id:"restore",tooltip:"Restore - Restore Snapshot"},{id:"unBisect",tooltip:"UnBisect - Go up a level"},{id:"bisect",tooltip:"Bisect - Go down a level"},{id:"reBisect",tooltip:"Re-bisect - Go back a level, then down the other side"}],ke=[["reset","camera"],["restore","switch-camera"],["unBisect","expand"],["bisect","minimize"],["reBisect","flip-vertical"]],P=class extends T.Plugin{settings;manifests=this.app.plugins.manifests;enabledColor=null;disabledColor=null;getItemEls;getAllItems;getEnabledFromObsidian;enableItem;disableItem;getFilters;_mode="plugins";get mode(){return this._mode}setMode(n){this._mode=n}mode2Call=new Map;mode2Refresh=new Map;mode2Tab=new Map;mode2Controls=new Map;mode2DisabledStates=new Map;mode2Snapshot=new Map;mode2Level=new Map(N.map(n=>[n,1]));key2Icon=new Map(ke);disableButtons=!1;get disabledState(){return this.mode2DisabledStates.get(this.mode)??[]}set disabledState(n){this.mode2DisabledStates.set(this.mode,n??[])}get snapshot(){return this.mode2Snapshot.get(this.mode)??new Set}set snapshot(n){this.mode2Snapshot.set(this.mode,n??new Set)}get controls(){return this.mode2Controls.get(this.mode)??[]}set controls(n){this.mode2Controls.set(this.mode,n??[])}get tab(){return this.mode2Tab.get(this.mode)}get wrapper(){return this.mode2Call.get(this.mode)}get refreshTab(){return this.mode2Refresh.get(this.mode)}set refreshTab(n){this.mode2Refresh.set(this.mode,n)}set level(n){this.mode2Level.set(this.mode,n)}get level(){return this.mode2Level.has(this.mode)||this.mode2Level.set(this.mode,1),this.mode2Level.get(this.mode)}async onunload(){this.saveData(),console.log("Divide & Conquer Plugin unloaded.")}async onload(){await this.loadData(),this.addSettingTab(new I(this.app,this)),console.log("Divide & Conquer Plugin loaded.");let n=()=>{$();let r=`${this.mode} level:${this.level} `;this.level===1?new T.Notice(r+"- Now in the original state"):this.level===0?new T.Notice(r+"- Enabled All"):new T.Notice(r)},o=()=>{this.settings.reloadAfterPluginChanges&&setTimeout(()=>this.app.commands.executeCommandById("app:reload"),2e3)},s=()=>{if(this.settings.initializeAfterPluginChanges)return this.app.plugins.initialize()};this.mode2Call=new Map(N.map(r=>[r,d=>async()=>W(this,()=>this.setMode(r),()=>console.log("called: ",d.name),d,()=>this.mode2Refresh.get(this.mode)(),o,s,n).bind(this)()])),this.mode2Tab=new Map([["plugins","community-plugins"],["snippets","appearance"]].map(([r,d])=>[r,this.getSettingsTab(d)])),Object.assign(this.mode2Tab.get("plugins"),{heading:"Installed plugins",reloadLabel:"Reload plugins",reload:()=>this.app.plugins.loadManifests()}),Object.assign(this.mode2Tab.get("snippets"),{heading:"CSS snippets",reloadLabel:"Reload snippets",reload:()=>this.app.customCss.loadSnippets()}),[...this.mode2Tab.entries()].forEach(([r,d])=>this.register(Z(d,{display:this.overrideDisplay.bind(this,r,d)}))),this.getItemEls=()=>{switch(this.mode){case"plugins":return Y(this.tab.containerEl.find(".installed-plugins-container").children);case"snippets":return X(this.tab);default:throw new Error("Unknown mode: "+this.mode)}},this.getAllItems=()=>{switch(this.mode){case"plugins":return new Set(Object.values(this.manifests));case"snippets":return new Set(this.app.customCss.snippets.map(r=>({name:r,id:r})))}},this.getEnabledFromObsidian=()=>{switch(this.mode){case"plugins":return this.app.plugins.enabledPlugins;case"snippets":return new Set(this.app.customCss.snippets.filter(r=>this.app.customCss.enabledSnippets.has(r)))}},this.enableItem=r=>{switch(this.mode){case"plugins":return this.app.plugins.enablePluginAndSave(r);case"snippets":return new Promise(d=>{this.app.customCss.setCssEnabledStatus(r,!0),setTimeout(()=>d({}),ee)})}},this.disableItem=r=>{switch(this.mode){case"plugins":return this.app.plugins.disablePluginAndSave(r);case"snippets":return new Promise(d=>{this.app.customCss.setCssEnabledStatus(r,!1),setTimeout(()=>d({}),ee)})}},this.getFilters=()=>{switch(this.mode){case"plugins":return this.settings.pluginFilterRegexes;case"snippets":return this.settings.snippetFilterRegexes}},this.addCommands(),this.app.workspace.onLayoutReady(()=>{let r=document.getElementsByClassName("app-container").item(0);this.enabledColor??=Q(V(r.getCssPropertyValue("--checkbox-color"))).spin(180).toHexString(),this.disabledColor??=Q(this.enabledColor).darken(35).toHexString()})}async loadData(){this.settings=Object.assign({},G,await super.loadData()),this.mode2DisabledStates=this.settings.disabledStates?new Map(Object.entries(JSON.parse(this.settings.disabledStates)).map(([n,o])=>[n,o.map(s=>new Set(s))])):new Map,this.mode2Snapshot=this.settings.snapshots?new Map(Object.entries(JSON.parse(this.settings.snapshots)).map(([n,o])=>[n,new Set(o)])):new Map}async saveData(n=!0){this.mode2DisabledStates?this.settings.disabledStates=JSON.stringify(Object.fromEntries([...this.mode2DisabledStates.entries()].map(([o,s])=>[o,[...s].map(r=>[...r])]))):this.settings.disabledStates=void 0,this.mode2Snapshot?this.settings.snapshots=JSON.stringify(Object.fromEntries([...this.mode2Snapshot.entries()].map(([o,s])=>[o,[...s]]))):this.settings.snapshots=void 0,n&&await this.restore(),await super.saveData(this.settings)}addControls(){let n=this.getControlContainer();this.mode2Controls??=new Map,this.mode2Controls.has(this.mode)||this.mode2Controls.set(this.mode,[...De.map(o=>new T.ExtraButtonComponent(n).setTooltip(o.tooltip).setIcon(this.key2Icon.get(o.id)).onClick(this.wrapCall(this.mode,o.id)).setDisabled(!1).extraSettingsEl),this.createLevelText()]),this.controls.last().setText(`Level: ${this.mode2Level.get(this.mode)}`),this.controls.forEach(o=>n.appendChild(o))}addCommands(){Ee.forEach(n=>this.addCommand(Object.assign(n,{callback:this.mode2Call.get("plugins")(this[n.id])}))),Re.forEach(n=>this.addCommand(Object.assign(n,{callback:this.mode2Call.get("snippets")(this[n.id])})))}async bisect(){if(this.level=this.level+1,this.level===1){this.restore();return}let{enabled:n}=this.getCurrentState(),o=await this.disableItems(n.slice(0,Math.floor(n.length/2)));return o.length>0?this.disabledState.push(new Set(o)):this.level--,o}async unBisect(){this.level=this.level>0?this.level-1:0;let{disabled:n}=this.getCurrentState();return await this.enableItems(n),this.disabledState.length>1?this.disabledState.pop():new Set}async reBisect(){if(this.level<2){new T.Notice("Cannot re-bisect the original state.");return}let n=await this.unBisect(),{enabled:o}=this.getCurrentState(),s=o.filter(r=>!n.has(r));await this.disableItems(s),s.length>0&&(this.disabledState.push(new Set(s)),this.level=this.level+1)}reset(){this.disabledState=this.snapshot=void 0,this.level=1;let{enabled:n,disabled:o}=this.getEnabledDisabled();this.disabledState=[new Set(o)],this.snapshot=new Set(o),this.saveData(!1)}async restore(){this.disabledState.length<1||(this.disabledState.slice(1).reverse().map(n=>this.enableItems(n)),await this.disableItems(this.snapshot),await this.app.plugins.requestSaveConfig(),setTimeout(()=>this.reset(),Te))}getCurrentState(){let{enabled:n,disabled:o}=this.getEnabledDisabled();this.disabledState=this.disabledState.length<1?[new Set(o)]:this.disabledState;let s=this.disabledState.last();return{enabled:n,disabled:s}}getEnabledDisabled(){let n=[...this.getExcludedItems()],o=[...this.getAllItems()].filter(r=>!n.some(d=>d.id===r.id)).sort((r,d)=>d.name.localeCompare(r.name)).map(r=>r.id);return{enabled:o.filter(r=>this.getEnabledFromObsidian().has(r)),disabled:o.filter(r=>!this.getEnabledFromObsidian().has(r))}}getIncludedItems(n){return this.getExcludedItems(n,!0)}getExcludedItems(n,o=!1){let s=this.mode;n&&this.setMode(n);let r=[...this.getAllItems()].filter(d=>o!==this.getFilters().some(f=>d.id.match(new RegExp(f,"i"))||this.settings.filterUsingDisplayName&&d.name.match(new RegExp(f,"i"))||this.settings.filterUsingAuthor&&d.author?.match(new RegExp(f,"i"))||this.settings.filterUsingDescription&&d.description?.match(new RegExp(f,"i"))));return n&&this.setMode(s),new Set(r)}async enableItems(n){return n instanceof Set&&(n=[...n]),console.log("Enabling:",n),n.reverse().map(o=>this.enableItem(o)),n}async disableItems(n){n instanceof Set&&(n=[...n]),console.log("Disabling:",n);for(let o of n)await this.disableItem(o);return n}getControlContainer(n){return n??=this.tab,J(n.containerEl,".setting-item-heading",n.heading).querySelector(".setting-item-control")}getReloadButton(n){return n??=this.mode2Tab.get(this.mode),this.getControlContainer(n).find(`[aria-label="${n.reloadLabel}"]`)}getSettingsTab(n){return this.app.setting.settingTabs.filter(o=>o.id===n).shift()}createLevelText(){let n=document.createElement("span");return n.setText(`Level: ${this.level}`),n}overrideDisplay(n,o,s){let r=this;return function(...f){r.setMode(n),r.refreshTab=()=>{console.log("refreshing tab",n),r.setMode(n),o.reload().then(()=>{s.apply(o,f),r.addControls(),r.colorizeIgnoredToggles()})},r.refreshTab()}.bind(r,o)}colorizeIgnoredToggles(){let n=this.createToggleMap(this.getItemEls()),o=new Set([...this.getIncludedItems()].map(s=>s.name));console.log("included",o,this.getIncludedItems(),n);for(let[s,r]of n){if(!o?.has(s)){let f=()=>{r.classList.contains("is-enabled")?r.style.backgroundColor=this.enabledColor:r.style.backgroundColor=this.disabledColor};f(),r.addEventListener("click",f)}let d=[...this.getAllItems()].find(f=>f.name==s)?.id;d&&this.snapshot&&this.snapshot.has(d)&&(r.style.outlineOffset="1px",r.style.outline="outset")}}createToggleMap(n){let o=new Map;for(var s=0;s<n.length;s++){let r=n[s],d=r.querySelector(".setting-item-name").innerText,f=r.querySelector(".setting-item-control").querySelector(".checkbox-container");d&&f&&o.set(d,f)}return o}wrapCall(n,o){return this.wrapper(this[o])}};
